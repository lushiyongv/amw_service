<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>选择邀请函模板</title>
    <meta name="description" content="">
    <meta content="telephone=no" name="format-detection" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon">

    <meta name="mobile-web-app-capable" content="yes">
    <!-- Apple -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta content="telephone=no" name="format-detection" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <!-- Our CSS stylesheet file -->
    <link rel="stylesheet" href="/static/css/normalize.css" />
    <link rel="stylesheet" href="/static/css/index_card.css" />

    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <style>
            header{
                background-repeat:repeat;
            }
          </style>
    <![endif]-->

    <!--[if IE]>
    <style>
            html ,h1 , h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, div, a, p{
                font-family: "Microsoft Yahei", "微软雅黑", "Tahoma", "Arial", "Helvetica", "STHeiti";
            }
            .copyright{
                width: 300px;
            }
            h1,.orange,h5,.big-font{
                font-weight:normal;
            }
            .newyearcover{
                display: none;
            }
          </style>
    <![endif]-->
    <style>
    .copyright {
        width: 304px;
        padding: 0 10px 20px;
        text-align: center;
    }
    .card-contact {
        color: #A3A3A3;
        font-size: 13px;
    }
    .company-number {
        padding-left: 0px;
    }
    .company-number:hover {
        color: #ffa200;
    }
    .hidden, #card_image, #main-poster {
        width:0px;
        height:0px;
        overflow:hidden;
        display: block;
    }
    /*邀请函使用说明*/
    .how-wrapper {
        background-color: rgba(0, 0, 0, 0.8);
        width: 100%;
        height: 100%;
        position: fixed;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        padding: 80px 30px 0;
        color: #FFF;
        z-index: 2;
        display: none;
    }
    .how-title {
        width: 100%;
        text-align: left;
        font-size: 18px;
        margin-bottom: 20px;
        font-weight: bold;
    }
    .how-tips {
        width: 100%;
        text-align: left;
    }
    .close-tip {
        width: 120px;
        margin: 30px auto;
        font-size: 18px;
        text-align: center;
        border: 2px solid #FFF;
        -webkit-border-radius: 4px;
        border-radius: 4px;
        padding: 4px 8px;
        line-height: 1.5;
    }
    ol {
        list-style-type: decimal;
        margin-left: 30px;
    }
    .animation {
        -webkit-animation-duration: 1.5s;
        -webkit-animation-fill-mode: both;
        animation-fill-mode: both;
    }
    .amway-cover {
        background-color: #fff;
        width: 100%;
        height: 100%;
        position: fixed;
        z-index: 10;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        z-index: 300;
    }
    .flyup {
        -webkit-animation-name: flyup;
        -moz-animation-name: flyup;
        -ms-animation-name: flyup;
        -o-animation-name: flyup;
        animation-name: flyup;
        -webkit-animation-delay: 3s;
        -moz-animation-delay: 3s;
        -ms-animation-delay: 3s;
        -o-animation-delay: 3s;
        animation-delay: 3s;
        -webkit-animation-duration: 2s;
        -moz-animation-duration: 2s;
        -ms-animation-duration: 2s;
        -o-animation-duration: 2s;
        animation-duration: 2s;
    }
    @keyframes flyup {
        0% {
            -webkit-transform: translateY(0px);
            -moz-transform: translateY(0px);
            -ms-transform: translateY(0px);
            -o-transform: translateY(0px);
            transform: translateY(0px);
        }
        100% {
            -webkit-transform: translateY(-980px);
            -moz-transform: translateY(-980px);
            -ms-transform: translateY(-980px);
            -o-transform: translateY(-980px);
            transform: translateY(-980px);
            z-index: -1;
        }
    }
    @-webkit-keyframes flyup {
        0% {
            -webkit-transform: translateY(0px);
            -moz-transform: translateY(0px);
            -ms-transform: translateY(0px);
            -o-transform: translateY(0px);
            transform: translateY(0px);
        }
        100% {
            -webkit-transform: translateY(-980px);
            -moz-transform: translateY(-980px);
            -ms-transform: translateY(-980px);
            -o-transform: translateY(-980px);
            transform: translateY(-980px);
            z-index: -1;
        }
    }
    .cover-logo {
        width: 120px;
        height: 75px;
    }
    #post_area{
        overflow: hidden;
        width: 90%;
        height: 50%;
        background-color: #FFF;
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        z-index: 70;
        padding: 10px;
        margin: 25% 5%;
        border-radius: 4px;
    }
    #button_more_template {
        width: 80%;
        background-color: #D73646;
        color: #FFF;
        margin: 20px auto 20px;
        text-align: center;
        padding: 5px;
        border-right: 14px;
        overflow: hidden;
        -webkit-box-shadow: 0 1px 1px rgba(0,0,0,.1);
                box-shadow: 0 1px 1px rgba(0,0,0,.1);
        -webkit-border-radius: 2px;
                border-radius: 2px;
        line-height: 1.5;
        -webkit-transition: 1s;
           -moz-transition: 1s;
            -ms-transition: 1s;
             -o-transition: 1s;
                transition: 1s;
    }
    #button_more_template.active{
        -webkit-box-shadow: inset 0 -2px 1px rgba(0, 0, 0, 0.1);
                box-shadow: inset 0 -2px 1px rgba(0, 0, 0, 0.1);
    }
    #post_text{
        width: 100%;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        -webkit-box-shadow: none;
                box-shadow: none;
        -webkit-appearance: none;
        padding: 5px;
        -webkit-border-radius: 2px;
                border-radius: 2px;
    }
    .post-title{
        text-align: center;
        color: #363636;
        line-height: 2;
        font-size: 17px;
        font-weight: bold;
        margin-bottom: 5px;
    }
    #submit{
        width: 40%;
        background-color: #D73646;
        margin: 10px auto 20px;
        text-align: center;
        color: #fff;
        padding: 5px;
        -webkit-box-shadow: 0 1px 1px rgba(0,0,0,.2);
                box-shadow: 0 1px 1px rgba(0,0,0,.2);
        -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
        -webkit-border-radius: 2px;
                border-radius: 2px;
        line-height: 1.5;
    }
    .hidden{
        display: none;
    }
    .show{
        -webkit-animation-name: show;
            -moz-animation-name: show;
            -ms-animation-name: show;
            -o-animation-name: show;
            animation-name: show;
    }
    #blackcover{
        background-color: rgba(0, 0, 0, 0.5);
        width: 100%;
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        z-index: 50;
    }
    #success{
        background-color: rgba(0,0,0, 0.8);
        -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        color: #fff;
        padding: 10px 20px;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 20;
        width: 100%;
        line-height: 1.5;
        font-size: 16px;
        text-align: center;
        -webkit-transform: translateY(-50px);
           -moz-transform: translateY(-50px);
            -ms-transform: translateY(-50px);
             -o-transform: translateY(-50px);
                transform: translateY(-50px);
    }
    
    .animation {
        -webkit-animation-fill-mode: both;
        animation-fill-mode: both;
    }
    .weixin-alert {
        -webkit-animation-name: short-alert;
        -moz-animation-name: short-alert;
        -ms-animation-name: short-alert;
        -o-animation-name: short-alert;
        animation-name: short-alert;
        -webkit-animation-duration: 3s;
        -moz-animation-duration: 3s;
        -ms-animation-duration: 3s;
        -o-animation-duration: 3s;
        animation-duration: 3s;
    }
    @keyframes short-alert {
        0% {
            -webkit-transform: translateY(-50px);
            -moz-transform: translateY(-50px);
            -ms-transform: translateY(-50px);
            -o-transform: translateY(-50px);
            transform: translateY(-50px);
        }
        30% {
            -webkit-transform: translateY(0);
            -moz-transform: translateY(0);
            -ms-transform: translateY(0);
            -o-transform: translateY(0);
            transform: translateY(0);
        }
        100% {
            -webkit-transform: translateY(-50px);
            -moz-transform: translateY(-50px);
            -ms-transform: translateY(-50px);
            -o-transform: translateY(-50px);
            transform: translateY(-50px);
        }
    }
    @-webkit-keyframes short-alert {
        0% {
            -webkit-transform: translateY(-50px);
            -moz-transform: translateY(-50px);
            -ms-transform: translateY(-50px);
            -o-transform: translateY(-50px);
            transform: translateY(-50px);
        }
        10% {
            -webkit-transform: translateY(0);
            -moz-transform: translateY(0);
            -ms-transform: translateY(0);
            -o-transform: translateY(0);
            transform: translateY(0);
        }
        90%{
            -webkit-transform: translateY(0);
            -moz-transform: translateY(0);
            -ms-transform: translateY(0);
            -o-transform: translateY(0);
            transform: translateY(0);
        }
        100% {
            -webkit-transform: translateY(-50px);
            -moz-transform: translateY(-50px);
            -ms-transform: translateY(-50px);
            -o-transform: translateY(-50px);
            transform: translateY(-50px);
        }
    }
    @media(max-height:580px){
        #post_area{
            height: 208px;
        }
    }
    @media(max-height:536px){
        #post_area{
            height: 220px;
        }
    }
    @media(max-height:420px){
        #post_area{
            height: 210px;
        }
    }
    </style>
</head>

<body>

    <header>
        <div class="title">安利邀请函</div>
    </header>
    
    <div id="blackcover" class="hidden"></div>

    {% if show_animation %}
    <div class="amway-cover animation flyup">
        <div class="cover-word">
            <img src="/static/images/cover_logo@2x.png" alt="" class="cover-logo">
            <br>安利邀请函
            <div class="slogan">帮助营销伙伴发送更专业的邀请函</div>
        </div>
    </div>
    {% else%} {% endif %}
    <!-- 容器开始 -->
    <div class="how-wrapper" id="how_wrapper">
        <h2 class="how-tips">
            <p class="how-title">欢迎使用安利邀请函：</p>
            <ol>
                <li>选择心仪的邀请函模板。</li>
                <li>填写邀请函内容，包括邀请主题、邀请对象、邀请内容以及您的姓名。</li>
                <li>生成邀请函，并发送给伙伴。</li>
            </ol>
        </h2>
        <div class="close-tip" id="close_tip">我知道了</div>
    </div>
    <div class="choose-title">请选择邀请函模板</div>
    <div class="container">

        <ul class="card-list">
            {% for card in card_list %}
            <li class="card-list-item">
                <a class="card" href="/yqk/card/template/{{ card.id }}/edit?id={{ card.id }}">
                        {% if forloop.counter < 5  %}
                            <img src="{{ card.get_card_image }}" alt="" class="card-img">
                        {% else %}
                            <img src="http://static.zuimeia.com/product/img/toupiao_img_loading.gif" data-echo="{{ card.get_card_image }}" alt="" class="card-img">
                        {% endif %}
                    </a>
            </li>
            {% endfor %}

        </ul>
        <div id="button_more_template">我想要更多模板</div>
        
        <div id="post_area" class="hidden">
            <p class="post-title">你觉得还需要有哪些模板？</p>
            <textarea name="" id="post_text" rows="5" placeholder="请输入你需要的模板…"></textarea>
            <div id="submit">提交</div>
        </div>
        <div id="success">提交成功！</div>
    </div>
    
    <!-- Google Analytics -->
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-46697618-2', 'brixd.com');
    ga('send', 'pageview');
    </script>


    <script src="/static/js/event_analysis.js"></script>
    <script src="/static/js/echo.min.js"></script>
    <script src="/static/js/weixin.js"></script>

    <script>
    var url_search = window.location.search,
        structured_url_path = location.protocol + '//' + location.host + location.pathname,
        d = document;
    var $how_wrapper = d.getElementById('how_wrapper');

    // 关闭新手引导后记录 cookie 并隐藏
    if (d.cookie.search('close_tip=1') < 0) {
        $how_wrapper.style.display = 'block';
    }

    d.getElementById('close_tip').onclick = function() {
        $how_wrapper.style.display = 'none';
        d.cookie = "close_tip=1";
    }

    // 第一次访问的时候记录 cookie，之后不显示开机页面
    if (d.cookie.search('startup=1') > 0) {
        d.getElementsByClassName('amway-cover')[0].style.display='none';
    }else{
        d.cookie = "startup=1";
    }

    function is_weixin() {
        var ua = navigator.userAgent.toLowerCase();
        if (ua.match(/MicroMessenger/i) == "micromessenger") {
            return true;
        } else {
            return false;
        }
    }
    var img = d.getElementsByTagName('img');

    // Lazyload
    Echo.init({
        offset: 500,
        throttle: 600
    });

    // 更改微信分享时的文字布局
    var imgUrl = 'http://qstatic.zuimeia.com/img/amway_service/invit_card/2014041112555695299_500x500.jpg';
    var lineLink = d.URL;
    var shareTitle = '安利邀请函';
    var descContent = "帮助营销伙伴发送更专业的邀请函";
    var post_area = d.getElementById('post_area'),
        button_more_template = d.getElementById('button_more_template'),
        blackcover = d.getElementById('blackcover'),
        submit = d.getElementById('submit');
    button_more_template.addEventListener('touchstart',function(){
        blackcover.className = 'show';
        post_area.className = 'show';
    })
        
    var hide_post = function(e){
        blackcover.className = 'hidden';
        post_area.className = 'hidden';
        e.preventDefault();
        return false;
    }
    
    blackcover.addEventListener('touchstart',function(e){
        hide_post(e);
    })

    submit.addEventListener('touchstart',function(e){
        var text = d.getElementById('post_text').value;
        var xmlhttp=new XMLHttpRequest();
        xmlhttp.open("POST",'/yqk/card/template_wish/',true);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send('details='+text);
        d.getElementById('success').className = 'animation weixin-alert';
        hide_post(e);
        setTimeout(function(){
          d.getElementById('success').className = '';  
        },4000)
    })
    </script>
    <!-- 百度分享代码 -->
    <script>
    with(d) 0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];
    </script>
</body>

</html>
